<p-growl [(value)]="msgs"></p-growl>
<div class="row">
    <div class="center">
        <div class="col-xs-4"></div>
        <div class="col-xs-4">
            <h2>{{usuario.nombre}} {{usuario.apellido}}</h2>
            <p>Amigos: {{usuario.cantidadAmigos}} | Seguidores: {{usuario.cantidadSeguidores}}</p>
        </div>
        <div class="col-xs-4">
            <img src="images/personalidades/{{usuario.personalidad.nombre}}.png" />
        </div>
    </div>
</div>
<br>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <ul class="nav navbar-nav">
            <li [ngClass]="{ 'active': activeTab == 'ideas' }"><a (click)="moveTab('ideas')" class="links">Principal</a></li>
            <li [ngClass]="{ 'active': activeTab == 'info' }"><a (click)="moveTab('info')" class="links">Información académica</a></li>
            <li [ngClass]="{ 'active': activeTab == 'friends' }"><a (click)="moveTab('friends')" class="links">Amigos</a></li>
            <li [ngClass]="{ 'active': activeTab == 'following' }"><a (click)="moveTab('following')" class="links">Siguiendo</a></li>
            <li [ngClass]="{ 'active': activeTab == 'followers' }"><a (click)="moveTab('followers')" class="links">Seguidores</a></li>
            <li [ngClass]="{ 'active': activeTab == 'badges' }"><a (click)="moveTab('badges')" class="links">Insignias</a></li>
            <li *ngIf="usuario.tipoUsuario == 'PROFESOR'" [ngClass]="{ 'active': activeTab == 'tg' }"><a (click)="moveTab('tg')" class="links">TG Dirigidos</a></li>
            <li *ngIf="usuario.tipoUsuario != 'ESTUDIANTE'" [ngClass]="{ 'active': activeTab == 'career' }"><a (click)="moveTab('career')" class="links">Formación académica</a></li>
        </ul>
    </div>
</nav>

<div *ngIf="activeTab == 'ideas'" class="row">
    <div class="col-xs-1">
    </div>
    <div class="col-xs-3">
        <div class="panel panel-default">
            <div class="panel-heading">
                <button type="button" (click)="editBasis()" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-pencil"></i></button>
                <h2 class="center">Información básica</h2>
                <div class="panel-body">
                    <p><strong>Nombre: </strong>{{usuario.nombre}}</p>
                    <p><strong>Apellido: </strong>{{usuario.apellido}}</p>
                    <p *ngIf="usuario.tipoUsuario == 'ESTUDIANTE'">
                        <strong>Semestre: </strong>
                        <span *ngIf="usuario.semestre < 11">{{usuario.semestre}}</span>
                        <span *ngIf="usuario.semestre > 10">10+</span>
                    </p>
                    <p><strong>Correo: </strong>{{usuario.email}}</p>
                    <p *ngIf="usuario.tipoUsuario == 'PROFESOR'"><strong>Grupo investigación: </strong>no disponible</p>
                    <p><strong>Tipo usuario: </strong>{{usuario.tipoUsuario}}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-7">
        <div class="form-group">
                    <label for="sel1">Seleccione el tipo de idea:</label>
                    <select class="form-control" id="sel1" [(ngModel)] = "selectedValueTipo" name = "tipoIdea" [ngModelOptions]="{standalone: true}">
                        <option value="NU">Nueva</option>
                        <option value="PC">Para continuar</option>
                        <option value="PE">Para empezar</option>
                        <option value="PE">Para empezar</option>
                    </select>
                </div>
            
                <div class="form-group">
                    <h4>Contenido</h4>
                    <textarea class="form-control" rows="5" 
                        [(ngModel)]="contenido" name = "content"></textarea>
                </div >

                <div class="form-group" *ngIf = "selectedValueTipo == 'PC' || selectedValueTipo == 'PE'">
                    <label for="numeroest">Numero de estudiantes: </label>
                    <input class="form-control" type="number"  
                        [(ngModel)] = "numeroEstudiantes" name = "numero">  
                </div>

                <div class="form-group" *ngIf = "selectedValueTipo == 'PE'">
                    <label for="alcance">Alcance: </label>
                    <input class="form-control" type="text" [(ngModel)] = "alcance" name = "alc">

                    <label for="problematica">Problematica: </label>
                    <input class="form-control" type="text"
                        [(ngModel)] = "problematica" name ="problem"> 

                </div>
                <div class="form-group" *ngIf = "selectedValueTipo == 'PR'">
                    <button type="button" class="btn">Agregar ideas</button>
                </div>
                <div class="form-group" *ngIf = "selectedValueTipo == 'PC'">
                    <button type="button" class="btn">Asociar trabajo de grado</button>
                </div>
                <p-autoComplete [(ngModel)]="selectedTags" [suggestions]="filteredTagsMultiple" (completeMethod)="filterTagMultiple($event)"
                    [minLength]="1" placeholder="tags" field="nombre" [multiple]="true" [ngModelOptions]="{standalone: true}">
                </p-autoComplete>
                <br>
                <button type="button" (click)="crearIdea()" class="btn btn-primary">Publicar</button>
        <div class="panel panel-default center" *ngFor="let i of ideas">
            <div class="panel panel-danger">
                <div class="panel-heading">{{i.usuario}}</div>
                <div class="panel-body">{{i.contenido}}</div>
                <div class="row">
                    <div class="col-xs-4"><button type="button" (click)="operacion(i)" class="btn btn-default btn-block"><i class="glyphicon glyphicon-asterisk"></i> Light</button></div>
                    <div class="col-xs-4"><button type="button" class="btn btn-default btn-block"><i class="glyphicon glyphicon-comment"></i> Comment</button></div>
                    <div class="col-xs-4"><button type="button" class="btn btn-default btn-block"><i class="glyphicon glyphicon-share"></i> Share</button></div>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="activeTab == 'info'">
    <div class="row">
        <div *ngIf="usuario.tipoUsuario != 'PROFESOR'" class="col-xs-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <button type="button" (click)="editHabilidadCualidad()" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-pencil"></i></button>
                    <h3>Habilidades personales:</h3>
                    <p *ngIf="habilidadesPersonales?.length == 0">No tiene habilidades personales registradas</p>
                    <button *ngFor="let h of habilidadesPersonales" type="button" class="btn btn-default">{{h.nombre}} <span class="badge">{{h.avales}}</span></button>
                    <!--<p *ngFor="let h of habilidadesPersonales">{{h.nombre}} <span class="label label-default">{{h.avales}}</span></p>-->
                </div>
            </div>
        </div>
        <div *ngIf="usuario.tipoUsuario == 'PROFESOR'" class="col-xs-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <button type="button" (click)="editHabilidadCualidad()" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-pencil"></i></button>
                    <h3>Cualidades como profesor:</h3>
                    <p *ngIf="usuario.cualidades?.length == 0">No tiene cualidades como profesor registradas</p>
                    <button *ngFor="let c of usuario.cualidades" type="button" class="btn btn-default">{{c.nombre}} <span class="badge">{{c.avales}}</span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div *ngIf="!usuario.segundaCarrera" class="col-xs-2">
        </div>
        <div [ngClass]="usuario.segundaCarrera ? 'col-xs-6':'col-xs-8'">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <button type="button" (click)="editCarrera(true)" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-pencil"></i></button>
                    <h2>{{usuario.carrera.nombre}}</h2>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <h3>Énfasis:</h3>
                            <p><strong>Principal: </strong>{{usuario.enfasis[0].nombre}}</p>
                            <p *ngIf="usuario.enfasis[1]"><strong>Secundario: </strong>{{usuario.enfasis[1].nombre}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <h3>Áreas de conocimiento:</h3>
                            <p *ngIf="areasConocimiento?.length == 0">No tiene áreas de conocimiento asociadas</p>
                            <p *ngFor="let ac of areasConocimiento">
                                {{ac.nombre}} <span *ngIf="usuario.tipoUsuario == 'PROFESOR'" class="badge">{{ac.porcentaje}} %</span>
                            </p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div *ngIf="usuario.tipoUsuario != 'PROFESOR'" class="panel-body">
                            <h3>Habilidades profesionales:</h3>
                            <p *ngIf="habilidadesProfesionales?.length == 0">No tiene habilidades profesionales registradas</p>
                            <button *ngFor="let h of habilidadesProfesionales" type="button" class="btn btn-default">{{h.nombre}} <span class="badge">{{h.avales}}</span></button>
                        </div>
                        <div *ngIf="usuario.tipoUsuario == 'PROFESOR'" class="panel-body">
                            <h3>Cualidades profesionales:</h3>
                            <p *ngIf="habilidadesProfesionales?.length == 0">No tiene cualidades profesionales registradas</p>
                            <button *ngFor="let h of usuario.habilidades" type="button" class="btn btn-default">{{h.nombre}} <span class="badge">{{h.avales}}</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="usuario.segundaCarrera" class="col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <button type="button" (click)="editCarrera(false)" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-pencil"></i></button>
                    <h2>{{usuario.segundaCarrera.nombre}}</h2>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <h3>Énfasis:</h3>
                            <p><strong>Principal: </strong>{{usuario.enfasis[2].nombre}}</p>
                            <p *ngIf="usuario.enfasis[3]"><strong>Secundario: </strong>{{usuario.enfasis[3].nombre}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <h3>Áreas de conocimiento:</h3>
                            <p *ngIf="areasConocimientoSeg?.length == 0">No tiene áreas de conocimiento asociadas</p>
                            <p *ngFor="let ac of areasConocimientoSeg">{{ac.nombre}}</p>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <h3>Habilidades profesionales:</h3>
                            <p *ngIf="habilidadesProfesionalesSeg?.length == 0">No tiene habilidades profesionales registradas</p>
                            <button *ngFor="let h of habilidadesProfesionalesSeg" type="button" class="btn btn-default">{{h.nombre}} <span class="badge">{{h.avales}}</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="activeTab == 'following' || activeTab == 'friends' || activeTab == 'followers'" class="row">
    <div class="col-xs-2"></div>
    <div *ngIf="activeTab == 'friends'" class="col-xs-8">
        <h3 *ngIf="!usuario.amigos || usuario.amigos?.length == 0">Aún no tiene amigos en su red.</h3>
        <div class="row">
            <div *ngFor="let a of usuario.amigos" class="col-xs-4">
                <button type="button" data-toggle="tooltip" title="Eliminar" (click)="eliminarAmigo(a.username)" class="btn btn-danger btn-circle right"><i class="glyphicon glyphicon-remove"></i></button>
                <a (click)="goProfile(a.username)">
                    <div class="card">
                        <img src="images/image-profile.png">
                        <div class="container-card">
                            <h3>{{a.nombre}}</h3>
                            <br>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div *ngIf="activeTab == 'followers'" class="col-xs-8">
        <h3 *ngIf="!usuario.seguidores || usuario.seguidores?.length == 0">Aún no tiene seguidores en su red.</h3>
        <div class="row">
            <div *ngFor="let s of usuario.seguidores" class="col-xs-4">
                <a (click)="goProfile(s.username)">
                    <div class="card">
                        <img src="images/image-profile.png">
                        <div class="container-card">
                            <h3>{{s.nombre}}</h3>
                            <br>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div *ngIf="activeTab == 'following'" class="col-xs-8">
        <h3 *ngIf="!usuario.siguiendo || usuario.siguiendo?.length == 0">Aún no está siguiendo a alguien.</h3>
        <div class="row">
            <div *ngFor="let s of usuario.siguiendo" class="col-xs-4">
                <a (click)="goProfile(s.username)">
                    <div class="card">
                        <img src="images/image-profile.png">
                        <div class="container-card">
                            <h3>{{s.nombre}}</h3>
                            <br>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
<div *ngIf="activeTab == 'badges'" class="row">
    <div class="col-xs-2"></div>
    <div class="col-xs-8">
        <h3 *ngIf="!usuario.insignias || usuario.insignias?.length == 0">Aún no ha conseguido insignias para mostrar.</h3>
        <div class="row">
            <div *ngFor="let a of usuario.insignias" class="col-xs-6">
                {{a}}
            </div>
        </div>
    </div>
</div>
<div *ngIf="activeTab == 'tg'" class="row">
    <div class="col-xs-2"></div>
    <div class="col-xs-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <button type="button" (click)="addTG()" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-plus"></i></button>
                <h2 class="center">Trabajos de grado dirigidos</h2>
                <p *ngIf="!usuario.tgDirigidos || usuario.tgDirigidos?.length == 0">No tiene trabajos de grado dirigidos asociados</p>
                <div class="panel panel-default" *ngFor="let tg of usuario.tgDirigidos">
                    <div class="panel-body">
                        <p><strong>Título: </strong>{{tg.nombre}}</p>
                        <p><strong>Periodo fin: </strong>{{tg.periodoFin}}</p>
                        <p><strong>Descripción: </strong>{{tg.descripcion}}</p>
                        <p><strong>Número de estudiantes: </strong>{{tg.numEstudiantes}}</p>
                        <p><strong>Resumen: </strong>{{tg.resumen}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="activeTab == 'career'" class="row">
    <div class="col-xs-2"></div>
    <div class="col-xs-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <button type="button" (click)="addFormacion()" class="btn btn-success btn-circle right"><i class="glyphicon glyphicon-plus"></i></button>
                <h2 class="center">Formación académica</h2>
                <p *ngIf="!usuario.formacionAcademica || usuario.formacionAcademica?.length == 0">No tiene formacion académica asociada</p>
                <div class="panel panel-default" *ngFor="let fa of usuario.formacionAcademica">
                    <div class="panel-body">
                        <p><strong>Título: </strong>{{fa.titulo}}</p>
                        <p><strong>Año: </strong>{{fa.anio}}</p>
                        <p><strong>Univerisidad: </strong>{{fa.universidad}}</p>
                        <p><strong>Título del trabajo de grado: </strong>{{fa.tituloTG}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>